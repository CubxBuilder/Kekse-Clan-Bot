import { AttachmentBuilder, Events } from "discord.js";

const STORAGE_CHANNEL_ID = "1423413348220796996";

export function registerStorageCommand(client) {
  client.on(Events.MessageCreate, async message => {
    if (message.author.bot) return;
    if (message.content !== "aj√∂slk") return;
    if (message.channel.id !== STORAGE_CHANNEL_ID) return;

    const data = {
      _init: true,
      counting: {
        currentNumber: 19,
        lastUserId: "1435207719429603349",
        lastCountingTime: 1771077755398,
        scoreboard: {
          "1266400369383047231": 105,
          "1215705226896740386": 36,
          "1416787374700236941": 91,
          "1395778435682533456": 1,
          "1051093106386284597": 196,
          "1247562549172637749": 41,
          "1014186378000601139": 15,
          "1394708479666819172": 10,
          "1341476313806012476": 1,
          "1275425602349830238": 4,
          "1232644707171958805": 1,
          "1117500437386494043": 4,
          "1406541925590372432": 2,
          "1201211788872659054": 45,
          "1357727579603468430": 2,
          "745298246980599838": 4,
          "1346918189375688804": 1,
          "1310730812731424812": 5,
          "371649310137384960": 1,
          "1334582973785309234": 3,
          "243830938549747723": 4,
          "1083788822376099960": 1,
          "1047547302333649016": 2,
          "1107410616123134063": 1,
          "1143151029706293409": 1,
          "1429845194106343497": 69,
          "987357529107476510": 1,
          "544540694077767681": 6,
          "1172824752528838768": 1,
          "1192423110490738709": 2,
          "628632671484117027": 1,
          "1435207719429603349": 67,
          "896022020364591144": 24,
          "1456649070558052518": 1,
          "1274320881585356892": 4,
          "1142488142897758268": 2,
          "1464348989687333062": 27,
          "1151971830983311441": 7,
          "1062436951266951198": 1,
          "1180975110165893152": 12,
          "1304775524215685209": 3,
          "1263039491959029783": 3,
          "1470079738553831522": 10,
          "1239911232773947414": 1,
          "1223365509580329026": 1,
          "1436995177288830986": 1,
          "1358497960094335088": 1,
          "1168921625287204894": 1,
          "1121874905009487932": 1,
          "1456362019706900593": 1,
          "1431378039199109161": 1
        }
      },
      ticket_panel: {
        messageId: "1465471793014898709"
      },
      tickets: {
        lastId: 5,
        tickets: {}
      },
      reminders: {
        reminders: []
      }
    };

    const buffer = Buffer.from(JSON.stringify(data, null, 2));
    const file = new AttachmentBuilder(buffer, { name: "storage.json" });

    await message.channel.send({ files: [file] });
  });
}
